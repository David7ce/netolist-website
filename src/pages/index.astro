---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getTopApps } from "../services/supabase.js";

// Obtiene las apps populares desde Supabase
const title = "Home - AlternativeTo Clone";
const popularApps = await getTopApps();
console.log("Popular Apps:", popularApps);
---

<BaseLayout title={title}>
  <main>
    <h1>Popular Apps</h1>
    {popularApps.length === 0 && <p>No popular apps found.</p>}
    <div class="apps-list">
      {popularApps.map((app) => (
        <div class="app-card">
          <h2>{app.name}</h2>
          <p>{app.description}</p>
          <a href={`/app/${app.id}`}>Learn more</a>
        </div>
      ))}
    </div>
  </main>
</BaseLayout>